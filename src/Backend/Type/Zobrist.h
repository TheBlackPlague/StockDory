//
// Copyright (c) 2023 StockDory authors. See the list of authors for more details.
// Licensed under LGPL-3.0.
//

#ifndef STOCKDORY_ZOBRIST_H
#define STOCKDORY_ZOBRIST_H

#include <cstdint>
#include <array>

#include "Piece.h"
#include "Color.h"
#include "Square.h"

#include "../Template/MoveType.h"

using ZobristHash = uint64_t;

namespace StockDory::Zobrist
{

//    class RNG
//    {
//
//        private:
//            ZobristHash Seed = 0x7F6EAD4C3B2A1908;
//
//        public:
//            [[nodiscard]]
//            constexpr inline ZobristHash Next()
//            {
//                Seed ^= Seed >> 12;
//                Seed ^= Seed << 25;
//                Seed ^= Seed >> 27;
//
//                return Seed * 0x2545F4914F6CDD1DULL;
//            }
//
//    };

    class ZobristKeyTable
    {

        public:
            std::array<std::array<std::array<ZobristHash, 64>, 7>, 3> PieceKey {
                0xA6236FC5F3D5CB40, 0xD08B197B0AE50DDC, 0x4C1C2B8202F856DC, 0xBC471B2026C87B34,
                0x97BBE5223FC13E95, 0xFA40BA2273CCB6EF, 0x15396251A0FEBEEC, 0xC085FCA64ABE89AE,
                0xF6AE4C573C7529C6, 0x7A29A85ECB12619B, 0x326AA61C623ACD3B, 0xF2F071279891AC04,
                0xA0A30345F9AD0B31, 0x05B66E50F0040710, 0x1FA322C2D80E435F, 0x2ACF15BAAA3842BE,
                0x373530FB529A1F70, 0x96E27AA215519A29, 0x0E301862E3388BF5, 0xFAE5F9CB033A8D67,
                0x2F0964D33080DA38, 0x437D8ED128AED70E, 0x58C8ECDC2EB4A15F, 0x306B32F56EEA8CEF,
                0x91C2B1FAC8DC56B4, 0xD93D08698AD40982, 0x4C1EB64429A3F70F, 0xDC3A9B7A47412711,
                0xAD49B5B27A737E6B, 0xE7EE3D17D3AC23DE, 0xFEEB428EFE5E114E, 0xE6177B70D2B69038,
                0x5A27C394EA1EF7CF, 0xD3344A09204AF6AD, 0x294E3B3C68F85A39, 0x633C76FF21417592,
                0x8B52041E1F04C50C, 0xEDF4CBF7985004EA, 0x93AAAE821699E25B, 0x375A05811E58F5A9,
                0x34B514464314E7B9, 0xC732B5EB387E6D07, 0x5EE026DD1CC55481, 0xE40A34AB2976711B,
                0x46A6B0B610DF19A9, 0xF3A7712F150E642D, 0x925A3E3F2D9D90C2, 0xD3898B9ED528B606,
                0xD01022D6D28E9A62, 0xA92ECA1778EE7EAD, 0x6BA4DD971A6782C9, 0xA2A8D18800094CBF,
                0xA01CD5E395B33BDB, 0x3B7AE14FC07FCC80, 0x853C6E241C0C7E87, 0xDC480F198A1323F5,
                0xF4C69817DC9D4CD6, 0xDD1BE45DCA9AC765, 0x6C7E8BC50978CDD2, 0x708792C1BFA02DFF,
                0xEF249E4402E9A383, 0x112771D45DB617B8, 0x4A163F974BB73507, 0xD23206F7EADC30CE,
                0x349919FAB947293F, 0x8D9821D5AD5189A9, 0x44D93BDA8CB88F05, 0xB1F739C114349E8C,
                0xEE166E2AAA1DE3E5, 0xAC7569ED0DA1839C, 0x04F7A54D68E44E97, 0x6F7285E45B2C0250,
                0x9763EE04F1C79F91, 0x2256CB9957F0CA78, 0x3F638F55727C8729, 0x1709BB41275A18EB,
                0xA9A883A24E7B3210, 0x846AA0B583EF4CEB, 0x021900085D310AAB, 0xBD563B93EB06873B,
                0xA58008506746D8C0, 0x4A89E09F0886D3DE, 0x100EAB89377BD6AD, 0xAF15BD7D1A127818,
                0xA333035ADCC232F6, 0x5B631179357E8B89, 0x15331FBFBD3DBBFD, 0x212865F6D74E36CA,
                0xAAF0AC1D6C12D7BD, 0x0796D82DFDADD8A2, 0xD7EF587FC21DB615, 0x23AC5CB42312ADFF,
                0x503EF6FEA2775D63, 0xF1E73571E61B93CA, 0x65A2664840C2479F, 0x45F5CC9A6F6D3AE7,
                0x1E08F461D09A8A2C, 0xC966083CECF7CC77, 0xFDDA6C996D8420C5, 0xFDB6CE89C4BA12BB,
                0xAB90179AE7BAD59E, 0xDE28B56E7CC8A43F, 0xC0AC87487AAAA3D4, 0xA99444394E159DAF,
                0xAE2E7E4E674EFA15, 0x058E5EA3F52ED88F, 0x16B43C24E5EFDBE9, 0xFB714102FD38FA29,
                0x5590C16774661F0F, 0x511DB6596FEAFB75, 0xD984AF545D650F0E, 0x4DAB3146533E3745,
                0x279D1AF783E53367, 0x72BC45512870994B, 0x60A613DCF2EEE7DD, 0x440F3C82302E8D9B,
                0xF45999D026089C50, 0x00885B3FBB123D72, 0x5371B9425F76CC7A, 0x0EA56DEB69E8858D,
                0x43A1963CB4D82B8A, 0x3F20EA009E80FA8D, 0x9602AFC6B6B52E05, 0x0508EFB04B99B42B,
                0xE4C3D38313310498, 0xA253D33847D2322A, 0xDA47EEB7BD64A965, 0x9D9356FD88894129,
                0x31BC0DB9FC057AF1, 0x585EBADD948BD06A, 0xAA4D4B8B07E6F761, 0xD4E63B4A41E956BC,
                0x57E857CDBE55349F, 0x6FFDB362E75232ED, 0xA6128B70062630E3, 0x2FE77A23633F5A2D,
                0x0A8A9F64A8F4B7EA, 0x094866F9581A8E0E, 0x1464E014195D7A58, 0x723484177390AF22,
                0x430A55BEABFC224B, 0xC7ACBA70E1F71CA6, 0x091BCE1DA80A3612, 0x89F2170EB585E052,
                0x034A9C69D60CA859, 0x67A382E8F7721970, 0x7C548C7AE160C902, 0x8F3454CFDE58F207,
                0x755DD6ADC8886D29, 0xCF21235B033706EC, 0xCC0F11B645B21E3D, 0x1C346B4476CE9053,
                0x2CBADBFA7ACDE2E4, 0xE421515474F4EA6C, 0x18D9EFA1B1A088D1, 0x8031E7071D74BB5E,
                0x61D5A655781E1BD2, 0x02789B1CCBD88663, 0xF47A83CABBA4EA6E, 0x85259C663E1CB509,
                0x2B8EA83239A174B9, 0xC3FB0D171B4D3FB3, 0x4EB575421CAE7143, 0xC6FA9789A06F2AA0,
                0xC6D03EF9A8125361, 0xFBDD5F358B08795B, 0x434208EEF4FB59B9, 0x1BA1EE39089852BF,
                0x04CA53FBC3B98644, 0x4119296DC9C1E8A1, 0x59D8059B30E6734C, 0x6D8DC7A6A6E8CE11,
                0x66001AA5AF47ECD7, 0x95D679460653F68F, 0x3E807108C5BB5639, 0xD95E236A2CB260AE,
                0x329C6AE180F2545A, 0x9812D2B2A5A17F73, 0x6665C70C4F6C52F8, 0x6BFCD3674400096C,
                0xCFB45587F2AB7998, 0xDB8BDACF885289BA, 0x93CD0EB717341A4E, 0x9FCA5769D8148BEE,
                0xA2101F27390C3683, 0x9196DC7582959D9E, 0x8AB4E49F4DF6257D, 0x6366DB41FB0318AB,
                0x2EB452CE9904B2BE, 0x121D4A791A789109, 0x9E007D60435B82F5, 0xC361151B0F8E8282,
                0x2BC3FCD8C2C43136, 0x6011996C0D44C871, 0x41032280BE05F1FA, 0xF312A5C44C1765B2,
                0xF8395B8647E3B42F, 0xE832F23898D22FBF, 0x1443A20F2A142D70, 0xCC6776E57210822E,
                0x9EDAC9B6B7DD50B5, 0xBF086A4F50FF0DB7, 0x8CE3E89096DB2F33, 0x4913C74B0318CE71,
                0xA6317A15E8E306C8, 0xC3C4F2A302727552, 0xCC3BD09AB53F5179, 0xF053D6B1E745516C,
                0xB8AA20874988B6F9, 0x7FE9E0761A4435FE, 0xF7AE5E88FA89550A, 0x7CF54935C37B16CA,
                0x583C7B69ED098122, 0x8C55218C65B786A6, 0x9B68594C5CDDC667, 0xB483E6A5707E9107,
                0x8E15FBD7F5F7C73F, 0xA86B48A601533118, 0xC92F996C6E5CEEC1, 0xC0B3CBFCD8E56E19,
                0x6BB46029C4250303, 0xBFF466051B434EB0, 0xA6481489B6AFD626, 0x4C923D1669DC2E98,
                0x617FA622A3FE927E, 0xB3C313561DBEF03A, 0xEE36FC1C26B22679, 0x73554B84FB2C7FBA,
                0x7F9C5167739DF6BC, 0x844F2B56997C4E56, 0x81306C8BEFEF296B, 0xEEDC847AA3E9105B,
                0x284B50765F604A9A, 0x8F979D7FCDCF328A, 0x50E8665B5B8FA72F, 0xD205F86757171BC5,
                0x1B0EF0CA0BFE8D71, 0xBE02629C5865C7DD, 0x349381F4D3735978, 0x91C0F4395A991062,
                0x3FC58C9EF15CFC2D, 0x63B38F00937D7498, 0xEFDE31850EDF5819, 0xE9E2B456B9A9C9FA,
                0xEC201006A02AD307, 0xD233FF037F3A3394, 0xFB0CB214E040365D, 0xE4E90BE3D4F76C1E,
                0x095C13652D8C9492, 0xFAEB5EF75179F338, 0x55D401731F5BD696, 0x88084B1899812EC6,
                0x4A6D06726FED554A, 0xC004BA3821A737DA, 0x9071C9B00D3EFC80, 0xEDF0C291366637BF,
                0x90887B70A106F0EA, 0x0C1CB3593B451068, 0x81D8FB0C1B19C12A, 0x17B9379F3BB05CE4,
                0x044F63B44737BA46, 0x0C3735839FA4AE74, 0xEEE0D5A9D00C5A1A, 0x31F04DCB14BD8518,
                0xC658D57B9EF52E57, 0xAEFD39575EA71472, 0x716EE92A4420A425, 0x27393BA52E2F48DA,
                0x45909840554773BD, 0xDF97812D945D4502, 0x6E06AB2D26EF0F87, 0x372129A533C484BF,
                0x8C6EA7F1E3A080DB, 0x5843D98BE542DA14, 0x11FA124C96A650B1, 0xD8A05CD4BC95D86D,
                0xE0EDB3E0ADB82623, 0xE5E32069521262A0, 0xC9EB8A8255816B40, 0xB7B8B21118768F86,
                0xFD78962164C1693A, 0x4CA8A700E9F5C662, 0x99564ADB697BB0F5, 0xEECED53D5127EF3B,
                0xA9C47F5FFF185AA9, 0xDEC80195BBF384F2, 0xEFDC4F36612329E6, 0x8DC0266F32282813,
                0x75EDA98EA53F06F8, 0x3A039A565776D2EB, 0x5AB86CB1146A4826, 0xCC39925636EB287E,
                0x3C4F22C18EC366C3, 0x799985D96375AD3B, 0x8BDBACBB270BEE24, 0x591EB7BE6627E54E,
                0x037875D6F093AA98, 0xF88154F603D82EF8, 0x171012866812718F, 0x847EE9FBDC3F378A,
                0xAEA2A8F22FCB1C8F, 0xF994D7D38D2F0775, 0x86D3B5A54CD62E63, 0x0E089C369F657B99,
                0xE6065289DA7454AF, 0xB24482E37EF363CE, 0xD9DF3112CC7846A2, 0xD878034277954549,
                0x1170BA627FDE20FF, 0x17A254C1417EF028, 0x7EFC3B24EFFCB336, 0xCBA48FBC44919B74,
                0xE84FC4A4C37E1BEA, 0xF4179DB322A466D6, 0xC4B488078F407EA2, 0x98542B29C70A6023,
                0x7272DFD5A656B24C, 0xD7CAD996BD191363, 0x62C3144F3EA19C84, 0xAABF88BA449FBA67,
                0xC31F704700D60B11, 0x492DF66EF32CCE0B, 0x3749168A8C423395, 0xDAB72E3F1B3FF4EF,
                0x1390C9038BAC6F53, 0x70F3D0E78133DE7D, 0xFB1F334587AE558D, 0xDC83043152119EC2,
                0xCC45A24AFF9F5116, 0x1F4FC8E2AC0F2FA3, 0x20943080EA8DCE01, 0x78E23DB765C8B04F,
                0xEB26F430956A565A, 0xFA18732316E3E20F, 0xE55C99766251F24E, 0x6514E0D999AF7EBD,
                0x0DEEB95D8C51964C, 0xDCFD7E4C9DDAA2A7, 0xC1027FECC517CE98, 0x2F118D44B1D884FA,
                0x949D8C218CC97ECE, 0x3E99BEBED3BB4403, 0xCC794EC80B00D381, 0x19C83DE1D8919094,
                0x0CBA70B4CECFAB91, 0x3C032EC4A7C18330, 0x7F66068D71309AEB, 0xC6B3C5FA90F8FC04,
                0x108ACAEE1242A17B, 0x6508D18D45DAF318, 0x8B8C570D46EC558D, 0x6B112978B7CA5044,
                0x214DF0EB222CFAD0, 0x32F1212B99581F10, 0x24B96CD8A50392F4, 0xEE98D2FF9ECDB715,
                0x9D7AE5A592746FE2, 0x235FF2FFED36CA07, 0x63926C26E5C3975F, 0x3D21AF22330D0841,
                0x0E8D5EACBBB76987, 0x2224CB350E9D6618, 0x76C8B30F683FAA57, 0x587A46D89D5110DD,
                0x0076A43B9566F9A9, 0x752E84CEC0CCB40A, 0xD32EB96F78DCEAE3, 0xD236EF0C9BDE41A1,
                0xB3E78F643C6544EC, 0x59A708E65A5D3E33, 0xEFE8016AEEB9DBE2, 0x1AF3DAC5FAF492CB,
                0x5310F21E89D4FA7E, 0x99EDD35C31442802, 0xEA68483631B98599, 0x59EDED9BD271755B,
                0xEF3A1E34ECDB424B, 0xF793B7BC41EB66CB, 0x36E4C22140605BA5, 0x15B83E81A92DE991,
                0x7B6401F719E6EB3A, 0xA42E275CCF66C94B, 0x8837AD8C402D79E2, 0x8C6E90F04A5AA55D,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0xA3FF79D1D006D6AE, 0x6AD9145C58F5E5F6, 0x8D88771107C789BB, 0xBA8A1AA652BB5DB4,
                0x68D35D208621D95A, 0x492CDFB7A74A897A, 0x367B66C9678FF0CB, 0xDBFDADBE731C784E,
                0x5E4953F282FD3A5A, 0xD4D5E02D888D5FB6, 0xF4F1238AB5867231, 0xCDA95F40A738EB5E,
                0x7856A9E27D4C6E8B, 0x6D09F3D96AB131A6, 0x375147264B4247A3, 0x561DA21B07240949,
                0x87F25893BEFCC0B5, 0x6B1A8672590F0D1C, 0x43A65D1CF804CAE1, 0x045D4E85D933151D,
                0x4ADA4BF619B45A13, 0xC2C5F738182FBB55, 0x5739259D5025B8EE, 0xCD0119247EA1B819,
                0x967401D217450AB0, 0x250B8D2E61A2B9F0, 0xEE660C28CCEA7150, 0x3C265BA93DFF5C20,
                0xEDF0ADB22D6762B9, 0x8B29D882E4608F43, 0xA4A4342EB32D7CAD, 0x94EC370175F657A4,
                0xA272DD25CBA76693, 0x486C82AB9989FD80, 0x840E722E2D907433, 0x0CEC7BB75A89C3BD,
                0xD0655D301C50CCA2, 0x22F80BAB31328B09, 0x2066BFA68C41AEEB, 0x05EA1854620E2257,
                0xD5174F31DFF77C10, 0xB1D9DD40A224C00E, 0xE2665F39096F66CA, 0xF17C034E0DC42F65,
                0x9BF019142F202DA0, 0x7AE0C39BE67E6C96, 0xB0CCE1A8ED975D49, 0x0A860A8B02791416,
                0xB09DA9BC13013244, 0xA2477FE1CD73D376, 0xBF488F6BF1C3494E, 0x8B10EEA0FF197060,
                0xA0BECDC268A273E5, 0x96CFFE6ED476E6C0, 0xB49E954641B3D7CD, 0x87109D904CB242EA,
                0x81DFDEDD6DE7E7C3, 0x625173188531238B, 0x5045CE3BC83283A0, 0x2210721B807EEDD5,
                0xEEB961178611EED5, 0x769C196323B632F7, 0xF44C486A0DAB50F0, 0x19665F60EF9897A2,
                0x3E4ACA6229AF0E13, 0xBBEC221809D144CA, 0x8DB803C6CB8F0750, 0x988DC9C97FE41CA2,
                0x2614736A540F9CCC, 0x7FDB437726426C05, 0x10529AD0589FDCAA, 0x0175CBE545872156,
                0xDD5198127C3D38B6, 0x5E1692C05AC568F3, 0x31C73529EDD56441, 0x3940CEEB48FEFF4A,
                0x126D5F063E6F41F7, 0xC44FF8D56765C18A, 0x81D787F68004280A, 0x24F1099912310B70,
                0xE157D8227E628B27, 0x515C60CF6863C2F7, 0x7043C0CAC33D3AAF, 0x80785B2DFACDEE6A,
                0x32A1D195493F41CF, 0x10B16E23338922D0, 0x67592ECB5F62DFAF, 0x9CB35D0B3413F247,
                0xDEBC12208E98E24A, 0xFC4C1037A8F20B98, 0xA1B518F84D4ABC3C, 0x73266DBEA301D7E7,
                0x9CEF23D641E8EC6E, 0x3730B13CBFC78423, 0x31A466124EF717A5, 0x2A1F181148A7F72C,
                0x19250A274A397FE4, 0x3565F551732AADCD, 0x0860D875A6FDC9A7, 0x0B8BA67CDE14B748,
                0x9B0FE677BDDA9C64, 0x37E0303C6480DEF1, 0x0CB5791A47A17192, 0x269D46F67001311E,
                0xC0BDA81BB40F1E22, 0x18CCFC5797B562BA, 0xEBF043050A4CDDD6, 0xAAA49EE4469FCEE7,
                0xE91B2B211D425A41, 0x21B41DC4B88DE0B3, 0xDF2192FA189AE965, 0x1CDB77094CCD232D,
                0xAAF7AEBAFD560ABD, 0xC92738B6245662C1, 0xAEB08B04FBE07D1A, 0x3BE0CF5EFDEF6238,
                0xB667B7C7B9FA7104, 0xF528FD3C9757EFF2, 0x3217E0978B3203FC, 0xF24CF9BE57C4A75A,
                0x62016D3E441F1A82, 0x3B72193414092A15, 0x24A4559C5A00FA39, 0xF8F710F2205FC859,
                0x8EB6E3DD211564A3, 0x41FD03D66D75CF02, 0x2D56F1F9C31D8835, 0x0570E10E76EBFA76,
                0x555D5003D0701132, 0x564E37DFCC587244, 0xB2FE34F26AEA1ECA, 0x218040F8E3ABE80E,
                0xE43D2D92C43B6F5F, 0x3E4D8999877FC72A, 0xFD1305F6F0AB95AC, 0x035D7AA51BC2BE12,
                0x9DC389FC6F6C37F1, 0x841977B42B3F06E0, 0x592A909563376C9A, 0xAF3E216AD3B23D5C,
                0x2242DE1C62957B69, 0x9A49E7C6EF0F0DD1, 0x616EFA4339813DA5, 0xBF33F0D7BF12130C,
                0xBB67B6E238C18FC8, 0x74933B808791142A, 0x6F6C05A02C2E17F3, 0xE04B82CC0956330D,
                0xEEB81026362750DA, 0xD0E0E6682F0EC5D6, 0xC21E06C2BFCB9D7F, 0xA7EF5D60AE2B5123,
                0xE34E5D1330ADB0C8, 0x26073DF6DB563F5E, 0xD31E8BB72E8A8553, 0x788D09E4D4126431,
                0x21BCB038B76667D5, 0xE6CC42AF8260E74F, 0x3CEFC1D3DB5B054A, 0x54FE7A4BAEFEDA92,
                0xA3ED4FD68F05DDB1, 0xEE239B2BCFDF68C8, 0x14A5B2AEDF892C98, 0xD5D60EB15E252977,
                0xFB0F3C3DD1D10BE9, 0xF6111FE16A12B818, 0xFFA61FF01E150FB6, 0xBAF18E2AAD17F038,
                0x5BB151CA1FE60A92, 0x57323A9FF6C78E1D, 0xCAE4B7F8A1A82F18, 0x89D162254C99D165,
                0x642BF239D7D858C6, 0xFE60AF576201BA5E, 0xDAC250E5FB94BFBD, 0xBA3664B8F9BA1C25,
                0x261E5B6246303DBD, 0xB57282B63E424403, 0x75A3D5CD658E9A71, 0xF9AB32381DB1FD96,
                0x629C197F19A54683, 0xA324840EA1F76EA1, 0xE7EDD0D61E8704AA, 0xD1EE00A964B0BA9A,
                0x583558DC6FBA4999, 0x126702DE5EC42CFE, 0xB3238DAA33730DD9, 0xA0B83768C57FBE58,
                0x51C6B4C9C4072680, 0x97088F0CAA1F2FCF, 0x0C26BA8D9C8A9E53, 0xC6EF70D81E160725,
                0x2448A2FAB7DD2373, 0xC9A6786D7B642146, 0xC5131CADCA72E7B5, 0x5E79A89EC29FFB00,
                0xB09D50B1E836583F, 0xAD9EAA566C556655, 0x571924FDF0694D60, 0x9E868503FEB71810,
                0x6418BD42143B05A8, 0x556FA6C74674C14A, 0x1B60883E5062F15D, 0xD0AD9E9999D8DF3F,
                0xA26A896E51C4B6DF, 0x6990D2AF3CA60534, 0x1F60352211A161A8, 0xABCB7EE562D520A4,
                0xD4E71EE21066A414, 0x6C6B24E2391BC087, 0xAAAD9BFD37F06F4F, 0xB6BD08B34DACA455,
                0x8A867F6C0B28FA39, 0x7F3D2719628ACC7A, 0x78AE948E761368B5, 0x7E2099713DBABCF6,
                0xD0005FFCE7FF6502, 0x2E904A1130BC65E8, 0xA52746F54B982D67, 0xE11949C4AF14AF4C,
                0x55835527B35F0BAC, 0xAC677DD7288E4268, 0xBB89D50044D68B2B, 0x9F0B504B4C9B593E,
                0x1207DDEA0584DB4C, 0xCFCEFFB8B2E243A9, 0xD7E0D57238846848, 0x180936BACE75A482,
                0x4EC161F9FCDCEE37, 0x3F02D7F2BD9AC384, 0x772CD2CBE304CB8B, 0x735838674683ACFA,
                0xE7D6D122CA7ACA39, 0xABE5223AAEB336A6, 0x644C2632EE4236A1, 0x4BE67BDE4C0165C2,
                0xBA1C385C2784266B, 0xD73C7D1F953C1DF5, 0x124169F630A5D8C7, 0x2B0889D0BD07167E,
                0x684EBD9E1443674F, 0x4545B6EA14F8881A, 0x0155B5D505852928, 0x6CE95E3145A971E5,
                0x09392839B7461114, 0xC7282C716E163D89, 0x99550204A695C1D1, 0xBC3608142C2E4112,
                0x000B8D70D8008C9E, 0xB890E79F987C7BF0, 0x116842C96F74E149, 0x80F50CF9F8A4ACBB,
                0x43564F2CE5CF5A06, 0x2BFABC8688B694B6, 0x5BF3C69332E375B1, 0xE30713E9C31DEF23,
                0xFA8CAA174592FB85, 0xFE8ADF8C34B9318A, 0x3FECC328834779B2, 0xA35A93323CC17467,
                0x0614B42A8A02D28D, 0x44CFBE0C62A7E9E9, 0xC2BB83CB6F101E64, 0xF7C84FE8A3DD520E,
                0xFDD4FFDCB9A716D7, 0xA9328A1C3F9A4065, 0x09D7EA8213D87CA4, 0x991D70D6D87C4017,
                0x64681516F68AAF20, 0x84A57BE98A0A134A, 0xED75B4776BFE341F, 0xF427FB839BA19E3F,
                0x8F923CFF6D1E0122, 0x9C204CDF6FC97414, 0x6C22B172A1B8F79B, 0x4EE0CC7377B69D39,
                0xE284385CE76716EB, 0xF20D06EB02576FA2, 0x718185428C00057D, 0x481B1A866133B2DE,
                0x633F38E4C9837B93, 0x33811F5A03FFD672, 0x660B54CC6DFAC390, 0x875C2304AA09F694,
                0x450E44826F6F0E53, 0xBF167E856C199CC6, 0x3F7BAD20C2D1FF30, 0x4F5E942FED341C6F,
                0x4CB011AF4BB07879, 0x16E19F3A2FA7B4B5, 0xA5679A51047949E0, 0x3116200F66002F92,
                0x1F0FCACE0DF2C93E, 0xD0044C066B0D844F, 0xDFFD591AE50D1D3A, 0x943C4A1080B80A10,
                0x1548D4AC71F1759E, 0x469EFB8CCDB55A3A, 0xE4163013F22B302B, 0x040E8F11C3FC13CB,
                0x6623925B90CD7848, 0x155230A4C0ABF7D4, 0x6E80491EE054726B, 0xAA0385D799A60C5E,
                0x98EA0E2D1484B04B, 0x9A4056841B1DC50C, 0xFEE62D3A9F57E6C0, 0x4F8E8AEC4E325EF8,
                0x5DE83EABF37401F4, 0x08E9642C59D4BC87, 0x1E6F642DF1D90BCC, 0x82AB9BDCCE1C86CA,
                0x81EE4CE18327CE36, 0x93D28C597E17FAFE, 0x8F229DB1E1822975, 0xEC81192225285691,
                0x7F26663D5E235110, 0x3DC4F14C33F2571C, 0x98D0CA19B25989B4, 0xE55FC9248BF198AB,
                0x0E567369076D2B78, 0x9F42EFAB5AC40202, 0x46D2CEBF9971EB91, 0x535B9B74A4B28A80,
                0x40D3BC8321BA0DF7, 0xBCED760516B04B33, 0xA925C65738F95155, 0x6699B1C1DE862758,
                0xD51C21349D6271A7, 0x0A41BC1E74663117, 0x30FB22A2234FF59D, 0x817EF5355BC810E7,
                0x34874F13936F49B2, 0x9C8BB16026212435, 0x84C47661CB407CE6, 0x229FC05824B53275,
                0x4EF6AD4CD5C1E4B2, 0x36D0D5007EED1B6E, 0x3B20B3B4B9752C85, 0x75DB6399E11DEA84,
                0x384FB5EF7C73FF84, 0x9F844688465DF285, 0xFF6DE64A2C9F7F61, 0x0AB4158F625085C4,
                0xCF46546201F9783F, 0x3EB3D955C1333CDC, 0x9D2AAFC41A7F7E66, 0x70A9ED6569B77491,
                0x0D3D824C1006523E, 0xEAA9ACB30D4FCF38, 0x8F46999511FC12D2, 0xEF6ADC9CEE6F5B4D,
                0xE3F1A2D20382C293, 0xE5EA1C60F4E27140, 0xA5DB97F05296CDCA, 0x5B714F13F1C2760C,
                0x3017A629F17A5F65, 0x312F52B723D11821, 0xFCFE1746CF238971, 0xF1CFFFDF5BF7DDE7,
                0x24BBF9A2008E8600, 0xBAEDB7C6D73166B5, 0x4E15A22B89809147, 0x2150BBAF4B097D60,
                0x778E2FC33023DF49, 0x2F3527E6DF19FFCD, 0x5DC5467F4E143CEF, 0xF97470EF249F4071,
                0x17F6BD93E68E0F16, 0x396836882CBB0803, 0x03A202A6725CD948, 0x5D88698F82BFC51A,
                0x329C4F98D6C91F8A, 0x3BD5998A774AFC46, 0x1352021315DC66D8, 0x998874FECDCC8B6D,
                0xF9A0916C69A15D80, 0x81782AB7A92C293D, 0x884A728C28AA83F0, 0xD133CE820D68B5CC,
                0x46CE6CF72CF6B174, 0x425BA8D6E9D7E3C5, 0x0D0C5FCA7ADD4A12, 0x6F769328B79C1913,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000,
                0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000
            };

            std::array<ZobristHash, 16>  CastlingKey {
                0x84894C3406355AF6, 0x23B2609AA96363B5, 0x1407B9F037FA2659, 0x311D16CFDE18E8A4,
                0xC50E55737BF3686D, 0xB37363FC66C458C1, 0x3C7E3E99025D7867, 0x9EB4AB344B612152,
                0x04B0366C313B3145, 0x4017A1F497763418, 0x2E981BB957766475, 0x1591C2F35128B6EA,
                0x30474127CB2126A4, 0xB148E6C764EA59C7, 0x2AE55C34CFD6200A, 0x55105F0DB5470D99
            };

            std::array<ZobristHash, 65> EnPassantKey {
                0x33194C80CEF360A3, 0x046733315F90461D, 0x47E1C1ECD246776E, 0x672391FA1A31F640,
                0xBD317AF266C19449, 0x65F986CCEEB2A307, 0xE1693D18964743A5, 0x8B38FE1A898DAB7F,
                0xF31100729C152822, 0xB97BF20F48CB8845, 0x0B4E8C4AB774CCFD, 0x08A3A8EC47E6DF2B,
                0xA5F25C70A3CB266A, 0x8DD120728F515331, 0x9641818A4E8BD430, 0x9C07CA1992710AD9,
                0xA049D726E8DEC2E5, 0x0A98BF3BF685CFD9, 0xE87E541C1716590D, 0x678B5FEB66C935E5,
                0x5866E942B0AAB44B, 0x1A5A4AFCBA74EA8B, 0x907FEFB3C0846671, 0x79B4E20EF103F544,
                0x24C8E81586AA1D43, 0x9AECC3E0328CBEF2, 0x5CB4CBDB85F4AFDA, 0xA84A75E54C6B1934,
                0x8905D39FDE76FB36, 0x80B04D62F4CD609E, 0x789E2FEE5E166808, 0x7C3F7B7CFB524E68,
                0x06FA0E4CE5FCE473, 0xE6F9BFFD7BE76BA9, 0x06BAEB5F7C44EB68, 0x230C09815175FE5C,
                0xFA34CB517E815120, 0xA97B234882B50F6E, 0x881DC23791936B55, 0x9F85A9984E88F529,
                0x9D947A3EAB5AC45F, 0x39BE3836500E49B7, 0x5EEB7B7615FBCC82, 0xC462E5435C55F834,
                0xDB6AD0C98423158A, 0xF152CCB4EDD9F6D6, 0xE3296FADCBCC4F37, 0xD15A38254677FBD8,
                0xB26F391420C549E7, 0x67AAFEA1803F2062, 0x1A169719F32463A5, 0x9EB52458CDAC3FEB,
                0xFDDC31066A06089B, 0xD942A9308D681ADF, 0x50B86613C2A01051, 0x3E59A18DD434AB32,
                0x746040F799E4A16A, 0x42EA892EFE132786, 0x358AF383487CD2FD, 0x3D6F08FD5B37B64F,
                0x11E2A9C48E222AC0, 0xA922B952EC3B2CAF, 0x77BA1125BBD7F1C0, 0x7E7604084149AE16,
                0x0000000000000000
            };

            ZobristHash ColorToMoveKey = 0x547E5B66033ED5B7;

//            constexpr ZobristKeyTable()
//            {
//                RNG rng = RNG();
//
//                for (size_t c = 0; c < 3; c++) for (size_t p = 0; p < 7; p++) for (size_t sq = 0; sq < 64; sq++) {
//                    if (c > 1 || p > 5) PieceKey[c][p][sq] = 0         ;
//                    else                PieceKey[c][p][sq] = rng.Next();
//                }
//
//                for (size_t i = 0; i < 16; i++) {
//                    CastlingKey[i] = 0;
//
//                    BitBoardIterator iterator (i);
//                    for (Square sq = iterator.Value(); sq != NASQ; sq = iterator.Value()) {
//                        ZobristHash key = CastlingKey[1ULL << sq];
//                        CastlingKey[i] ^= key ? key : rng.Next();
//                    }
//                }
//
//                for (size_t i = 0; i < 65; i++) {
//                    if (i == 64) EnPassantKey[i] = 0         ;
//                    else         EnPassantKey[i] = rng.Next();
//                }
//
//                ColorToMoveKey = rng.Next();
//            }

    };

}

constexpr StockDory::Zobrist::ZobristKeyTable ZobristKeyTable;

template<MoveType T>
constexpr inline ZobristHash HashPiece(const ZobristHash hash, const Piece p, const Color c, const Square sq)
{
    if (T & ZOBRIST) return hash ^ ZobristKeyTable.PieceKey[c][p][sq];
    return hash;
}

template<MoveType T>
constexpr inline ZobristHash HashCastling(const ZobristHash hash, const uint8_t castlingRight)
{
    if (T & ZOBRIST) return hash ^ ZobristKeyTable.CastlingKey[castlingRight];
    return hash;
}

template<MoveType T>
constexpr inline ZobristHash HashEnPassant(const ZobristHash hash, const Square enPassantSquare)
{
    if (T & ZOBRIST) return hash ^ ZobristKeyTable.EnPassantKey[enPassantSquare];
    return hash;
}

template<MoveType T>
constexpr inline ZobristHash HashColorFlip(const ZobristHash hash)
{
    if (T & ZOBRIST) return hash ^ ZobristKeyTable.ColorToMoveKey;
    return hash;
}

#endif //STOCKDORY_ZOBRIST_H
